# Code Breaker Multiplayer Game (Go)

---

##  About the Project

A multiplayer "Code Breaker" game written in Go. In this game, players must guess a secret 4-digit code generated by the server. The server returns feedback based on how accurate the guesses are.

The game supports:
- **Single-player mode** - One player plays against the computer
- **Multiplayer mode** - 2+ players take turns guessing the code
- Docker and Kubernetes deployment
- CLI-based interaction

---

## Features

### Game Modes
- **Single-player mode**: One player guesses until they break the code
- **Multiplayer mode**: Players take turns guessing the code (2+ players)
- Input validation (only 4-digit numbers accepted)
- Secret code generated using custom rules:
  - Even sum â†’ number reversed
  - Odd sum â†’ each digit incremented (9 wraps to 0)
  - Palindromes â†’ replaced with 7777
- Real-time feedback on guesses
- Game restarts without reconnecting
- Configurable number of players in multiplayer mode

### How to Play
1. Start the server in either single-player or multiplayer mode
2. Connect as a client
3. Guess a 4-digit number when it's your turn
4. Continue guessing until someone (or you in single-player) breaks the code
5. After the game concludes, you can choose to play again

---

## ðŸ“¦ Deployment Guide

### 1. Pre-requisites

Install:

- Docker
- Git
- (Optional) Docker Compose
- (Optional) Kubernetes CLI (`kubectl`)

### 2. Clone the Project

```bash
git clone https://github.com/YOUR_USERNAME/YOUR_REPO.git
cd YOUR_REPO
git checkout -b YOURNAME_SURNAME
```

### 3. Build with Docker

```bash
docker build -t go-code-breaker -f Dockerfile .
```

### 4. Run Locally with Docker

Start the server:

```bash
# For single-player mode
docker run -p 8080:8080 go-code-breaker ./mygame server

# For multiplayer mode (e.g., 2 players)
docker run -p 8080:8080 go-code-breaker ./mygame server 2
```

Start a client:

```bash
docker build -t go-game-client -f Dockerfile.client .
docker run go-game-client
```

---

##  Docker Compose (Multiplayer Setup)

Use `docker-compose.yml` to spin up a server and 2 clients:

```bash
docker-compose up --build
```

- Logs:
```bash
docker logs game-client1
docker logs game-client2
```

- To attach to a client and interact with the game:
```bash
docker attach game-client1
```

- To stop:
```bash
docker-compose down
```

To modify the docker-compose.yml for single-player mode, change the server command to:
```yaml
command: ["./mygame", "server"]  # No extra arguments for single-player
```

For multiplayer with more than 1 player, change to:
```yaml
command: ["./mygame", "server", "2"]  # (e.g., 2 players)
```
And add more client services as needed.

---

## Kubernetes Deployment 

1. Push your Docker images to Docker Hub
2. Modify the server deployment YAML if needed:
   - For single-player: `command: ["./mygame", "server"]`
   - For N-player multiplayer: `command: ["./mygame", "server", "N"]`
3. Apply the YAMLs:

```bash
kubectl apply -f game-server-deployment.yaml
kubectl apply -f game-client1-deployment.yaml
kubectl apply -f game-client2-deployment.yaml
```

4. Access service via NodePort or Minikube:

```bash
minikube service game-server-service
```

---

## Testing

Unit tests written in Go with edge case coverage:

```bash
go test ./...
```

- Mocks used to override random generation in tests
- Validates input, secret code logic, prefix logic, etc.

---

## Development

- All development should be done on your personal branch:
```bash
git checkout -b YOURNAME_SURNAME
git push origin YOURNAME_SURNAME
```

- Do not push to `main`
- Add meaningful commit messages

---

## Game Instructions

### Starting the Game

```bash
# Start in single-player mode
go run main.go server

# or Start in multiplayer mode with custom number of players (e.g., 3 players)
go run main.go server 3

# Connect as a client (local mode requires providing the address explicitly)
go run main.go client localhost:8080
```

### Game Rules

1. The server generates a secret 4-digit code based on these rules:
   - Initial random number between 1000-9999
   - If sum of digits is even, the number is reversed
   - If sum of digits is odd, each digit is incremented (9 wraps to 0)
   - If the resulting number is a palindrome, all digits become 7
   
2. Players take turns guessing the code (or continuously guess in single-player mode)

3. When a player guesses correctly:
   - The game announces the winner
   - Shows the total number of guesses made
   - Asks if players want to play again

4. Players can exit any time by typing "exit"

---

## Example Game Flow

### Single-Player Mode
```
Welcome Player 1! You are playing in single-player mode against the computer.
Game is starting in single-player mode!
Try to guess the 4-digit code.

It's your turn. Enter your guess:
> 1234
You guessed 1234 (incorrect). Total guesses: 1
It's your turn. Enter your guess:
> 5678
You guessed 5678 (incorrect). Total guesses: 2
[...continues until correct guess...]
```

### Multiplayer Mode
```
Welcome Player 1! Waiting for other players... (1/2 connected)
Player 2 has joined the game. (2/2 players connected)

Game is starting with 2 players!
Try to guess the 4-digit code. Players will take turns in order.

Players in this game:
- Player 1
- Player 2

It's your turn. Enter your guess:
> 1234
Player 1 guessed 1234 (incorrect). Total guesses: 1

Waiting for Player 2 to make a guess...
[Player 2 guesses...]
```

---

## Author Info

Full Name: Mor simha 

---