# Code Breaker Multiplayer Game (Go)

---

##  About the Project

A multiplayer "Code Breaker" game written in Go. In this game, players must guess a secret 4-digit code generated by the server. The server returns feedback based on how accurate the guesses are.

The game supports:
- **Single-player mode** - One player plays against the computer
- **Multiplayer mode** - 2+ players take turns guessing the code
- **Time-based challenge** - Players must guess within a time limit or forfeit their turn
- **Server-side analytics** - Track game statistics and identify hard-to-guess numbers
- Docker and Kubernetes deployment
- CLI-based interaction

---

## Features

### Game Modes
- **Single-player mode**: One player guesses until they break the code
- **Multiplayer mode**: Players take turns guessing the code (2+ players)
- Input validation (only 4-digit numbers accepted)
- Secret code generated using custom rules:
  - Even sum → number reversed
  - Odd sum → each digit incremented (9 wraps to 0)
  - Palindromes → replaced with 7777
- Real-time feedback on guesses
- Game restarts without reconnecting
- Configurable number of players in multiplayer mode

### Time-Based Challenge
- Each player has 30 seconds to make their guess
- If time runs out:
  - In multiplayer mode: Player forfeits their turn, and play passes to the next player
  - In single-player mode: Player is prompted to try again
- Visual indicators (⏰) alert players about time limits and timeouts
- Creates tension and maintains game pace

### Analytics System
- Tracks comprehensive game statistics:
  - Games played and won
  - Which numbers are hardest to guess
  - Most common guesses made by players
  - Player performance statistics (win rates, best games)
  - Average guesses per game
- Admin interface to view real-time statistics
- Helps identify patterns and improve gameplay
- Accessible via a separate admin client

### How to Play
1. Start the server in either single-player or multiplayer mode
2. Connect as a client
3. Guess a 4-digit number when it's your turn (within the time limit!)
4. Continue guessing until someone (or you in single-player) breaks the code
5. After the game concludes, you can choose to play again

---

## 📦 Deployment Guide

### 1. Pre-requisites

Install:

- Docker
- Git
- (Optional) Docker Compose
- (Optional) Kubernetes CLI (`kubectl`)

### 2. Clone the Project

```bash
git clone https://github.com/YOUR_USERNAME/YOUR_REPO.git
cd YOUR_REPO
git checkout -b YOURNAME_SURNAME
```

### 3. Build with Docker

```bash
docker build -t go-code-breaker -f Dockerfile .
```

### 4. Run Locally with Docker

Start the server:

```bash
# For single-player mode
docker run -p 8080:8080 -p 8081:8081 go-code-breaker ./mygame server

# For multiplayer mode (e.g., 2 players)
docker run -p 8080:8080 -p 8081:8081 go-code-breaker ./mygame server 2
```

Start a client:

```bash
docker build -t go-game-client -f Dockerfile.client .
docker run go-game-client
```

Start the admin client:
```bash
go run admin_client.go localhost:8081
```

---

##  Docker Compose (Multiplayer Setup)

Use `docker-compose.yml` to spin up a server and 2 clients:

```bash
docker-compose up --build
```

- Logs:
```bash
docker logs game-client1
docker logs game-client2
```

- To attach to a client and interact with the game:
```bash
docker attach game-client1
```

- To stop:
```bash
docker-compose down
```

To modify the docker-compose.yml for single-player mode, change the server command to:
```yaml
command: ["./mygame", "server"]  # No extra arguments for single-player
```

For multiplayer with more than 1 player, change to:
```yaml
command: ["./mygame", "server", "2"]  # (e.g., 2 players)
```
And add more client services as needed.

---

## Kubernetes Deployment 

1. Push your Docker images to Docker Hub
2. Modify the server deployment YAML if needed:
   - For single-player: `command: ["./mygame", "server"]`
   - For N-player multiplayer: `command: ["./mygame", "server", "N"]`
3. Apply the YAMLs:

```bash
kubectl apply -f game-server-deployment.yaml
kubectl apply -f game-client1-deployment.yaml
kubectl apply -f game-client2-deployment.yaml
```

4. Access service via NodePort or Minikube:

```bash
minikube service game-server-service
```

---

## Testing

Unit tests written in Go with edge case coverage:

```bash
go test ./...
```

- Mocks used to override random generation in tests
- Validates input, secret code logic, prefix logic, etc.

---

## Development

- All development should be done on your personal branch:
```bash
git checkout -b YOURNAME_SURNAME
git push origin YOURNAME_SURNAME
```

- Do not push to `main`
- Add meaningful commit messages

---

## Game Instructions

### Starting the Game

```bash
# Start in single-player mode
go run main.go server

# or Start in multiplayer mode with custom number of players (e.g., 2 players)
go run main.go server 2

# Connect as a client (local mode requires providing the address explicitly)
go run main.go client localhost:8080

# Access analytics (admin interface)
go run admin_client.go localhost:8081
```

### Game Rules

1. The server generates a secret 4-digit code based on these rules:
   - Initial random number between 1000-9999
   - If sum of digits is even, the number is reversed
   - If sum of digits is odd, each digit is incremented (9 wraps to 0)
   - If the resulting number is a palindrome, all digits become 7
   
2. Players take turns guessing the code (or continuously guess in single-player mode)

3. **Time Challenge**: Each player has 30 seconds to make a guess
   - In multiplayer: Timeout results in forfeited turn
   - In single-player: Timeout prompts the player to try again

4. When a player guesses correctly:
   - The game announces the winner
   - Shows the total number of guesses made
   - Asks if players want to play again

5. Players can exit any time by typing "exit"

### Admin Interface

The game includes an admin interface to view analytics:

1. Start the admin client:
   ```bash
   go run admin_client.go localhost:8081
   ```

2. Available commands:
   - `stats` - Display comprehensive game statistics
   - `exit` - Exit the admin client

3. Analytics provided:
   - Overall statistics (games played, win rates, average guesses)
   - Hardest numbers to guess
   - Most common player guesses
   - Top players by win rate

---

## Example Game Flow

### Single-Player Mode
```
Welcome Player 1! You are playing in single-player mode against the computer.
⏱️ You have 30 seconds to make each guess!
Game is starting in single-player mode!
Try to guess the 4-digit code.

It's your turn. Enter your guess:
> 1234
You guessed 1234 (incorrect). Total guesses: 1
It's your turn. Enter your guess:
> [player takes too long]
⏰ Time's up! You took longer than 30 seconds. Try again:
> 5678
You guessed 5678 (incorrect). Total guesses: 2
[...continues until correct guess...]
```

### Multiplayer Mode
```
Welcome Player 1! Waiting for other players... (1/2 connected)
⏱️ You will have 30 seconds to make each guess!
Player 2 has joined the game. (2/2 players connected)

Game is starting with 2 players!
Try to guess the 4-digit code. Players will take turns in order.
⏱️ Each player has 30 seconds to make their guess!

Players in this game:
- Player 1
- Player 2

It's your turn. Enter your guess:
> 1234
Player 1 guessed 1234 (incorrect). Total guesses: 1

Waiting for Player 2 to make a guess...
[Player 2 takes too long]
⏰ Player 2 ran out of time and forfeited their turn!

It's your turn. Enter your guess:
> 5678
[...continues until correct guess...]
```

### Admin Interface
```
Code Breaker Admin Client
========================
Available commands:
  stats - Display game statistics
  exit - Exit the admin client

Enter command: stats

=== CODE BREAKER GAME ANALYTICS ===

OVERALL STATISTICS:
Games Played: 27
Games Won: 18 (66.7%)
Average Guesses Per Game: 8.42
Average Guesses Per Win: 7.83
Total Unique Players: 12
Average Players Per Game: 1.78
Average Game Duration: 4m27s

TOP 5 HARDEST NUMBERS TO GUESS:
1. Number 7777 - 16.33 guesses on average (appeared 3 times)
2. Number 9000 - 12.50 guesses on average (appeared 2 times)
3. Number 4321 - 9.25 guesses on average (appeared 4 times)
4. Number 2468 - 7.67 guesses on average (appeared 3 times)
5. Number 5678 - 6.50 guesses on average (appeared 2 times)

TOP 5 MOST COMMON GUESSES:
1. 1234 - guessed 42 times
2. 5678 - guessed 27 times
3. 1111 - guessed 18 times
4. 9999 - guessed 15 times
5. 0000 - guessed 12 times

TOP 5 PLAYERS BY WIN RATE:
1. Player 3 - 83.3% win rate (5 wins)
2. Player 1 - 71.4% win rate (10 wins)
3. Player 5 - 50.0% win rate (2 wins)
4. Player 2 - 25.0% win rate (1 win)
5. Player 4 - 0.0% win rate (0 wins)
```

---

## Author Info

Full Name: Mor simha 

---